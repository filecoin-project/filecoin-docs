---
title: "Consensus"
description: ""
lead: "In the Filecoin blockchain, network consensus is achieved using the Expected Consenus (EC) algorithm, a secret, fair and verifiable consensus protocol used by the network to agree on the overall chain state at each epoch, including the storage power currently available in the network."
draft: true
images: []
type: docs
menu:
  basics:
    parent: "basics-the-blockchain"
    identifier: "consensus-688d0e228f7debf695c906ad442cb462"
weight: 100
toc: true
draft: false
---

## Overview

In the Filecoin blockchain, network _{{< tooltip "consensus" >}}_ is achieved using the Expected Consenus (EC) algorithm, a probabilistic, _{{< tooltip "Byzantine fault-tolerant" >}}_ consensus protocol. At a high-level, EC achieves consensus by running a secret, fair and verifiable _leader election_ at every {{< tooltip "epoch" >}} where a set number of participants may become eligible to submit a [block](https://docs.filecoin.io/reference/general/glossary/#block) to the chain based on fair and verifiable criteria. 

## Properties 

Expected Consensus (EC) has the following properties:

- Each [epoch](https://docs.filecoin.io/reference/general/glossary/#epoch) has potentially multiple elected leaders who may propose a block.
- A winner is elected randomly from a set of network participants weighted according to the respective [storage power](https://docs.filecoin.io/reference/general/glossary/#storage-power) they contribute to the Filecoin network. 
- All blocks proposed are grouped together in a _tipset_, from which the final chain is selected.
- A block producer can be verified by any participant in the network.
- The identity of a block producer is anonymous until they release their block to the network.

## Steps 

In summary, EC involves the following steps at each _{{< tooltip "epoch" >}}_:

1. A storage provider checks to see if they are elected to propose a block by generating an [_election proof_](https://spec.filecoin.io/#section-glossary.election-proof).
1. Zero, one or multiple storage providers may be elected to propose a block. This does not mean that an elected participant is guaranteed to be able to submit a block. In the case where:

   - **No storage providers are elected to propose a block in a given epoch**, a new [election](https://docs.filecoin.io/reference/general/glossary/#election) is run in the next epoch to ensure that the network remains live.
   - **One or more storage providers are elected to propose a block in a given epoch**, each must generate a _WinningPoSt proof-of-storage_ to be eligible to actually submit a block.

   </br>

1. Each potential block producer elected generates a storage proof using [WinningPoSt]({{< relref "proofs.md#winningpost" >}}) for a randomly selected _{{< tooltip "sector" >}}_ within in short window of time. Potential block producers that fail this step are not eligible to produce a block. In this step, the following could occur:

   - **All potential block producers fail WinningPoSt**, in which case EC returns to step 1 (described above).
   - **One or more potential block producers passes WinningPoSt**, which means they are eligible to submit that block to the epochs tipset.
   
   </br>


1. Blocks generated by block producers are grouped into a [tipset]({{< relref "tipsets" >}}). 

1. The [tipset](https://docs.filecoin.io/reference/general/glossary/#tipset) that reflects the biggest amount of committed storage on the network is selected.

1. Using the selected tipset, the chain state is propagated.

1. EC returns to step 1 in the next epoch.

